// Generated by CoffeeScript 2.2.0
(function() {
  var BetokenFund, ControlToken, OraclizeHandler, config;

  BetokenFund = artifacts.require("BetokenFund");

  ControlToken = artifacts.require("ControlToken");

  OraclizeHandler = artifacts.require("OraclizeHandler");

  config = require("../deployment_configs/testnet.json");

  module.exports = function(deployer, network, accounts) {
    return deployer.deploy([
      [
        BetokenFund,
        config.etherDeltaAddress, //Ethdelta address
        accounts[0],
        config.precision, //precision
        config.timeOfChangeMaking, //2 * 24 * 3600, #timeOfChangeMaking
        config.timeOfProposalMaking, //2 * 24 * 3600, #timeOfProposalMaking
        config.timeOfWaiting, //timeOfWaiting
        config.timeOfSellOrderWaiting, //timeOfSellOrderWaiting
        config.minStakeProportion, //minStakeProportion
        config.maxProposals, //maxProposals
        config.commissionRate, //commissionRate
        config.orderExpirationTimeInBlocks, //3600 / 20, #orderExpirationTimeInBlocks
        config.developerFeeProportion, //developerFeeProportion
        config.maxProposalsPerMember, //maxProposalsPerMember
        0 //cycleNumber
      ],
      [ControlToken]
    ]).then(function() {
      return deployer.deploy(OraclizeHandler, ControlToken.address, config.etherDeltaAddress, "json(https:#min-api.cryptocompare.com/data/price?fsym=", "&tsyms=ETH).ETH");
    }).then(function() {
      return ControlToken.deployed().then(function(instance) {
        return instance.transferOwnership(BetokenFund.address);
      });
    }).then(function() {
      return OraclizeHandler.deployed().then(function(instance) {
        return instance.transferOwnership(BetokenFund.address);
      });
    }).then(function() {
      return BetokenFund.deployed().then(function(instance) {
        return instance.initializeSubcontracts(ControlToken.address, OraclizeHandler.address);
      });
    });
  };

}).call(this);

//# sourceMappingURL=2_deploy_contracts.js.map
